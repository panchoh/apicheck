<!doctype html>
<html lang="en">
<head>
<title>APICheck: The DevSecOps Toolset for REST APIs</title>
<!-- 2019-12-02 Mon 06:16 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style type="text/css">
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script type="text/javascript">
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-9"><h1 class="title">APICheck: The DevSecOps Toolset for REST APIs</h1>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Links:</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><a href="https://github.com/BBVA/apicheck">https://github.com/BBVA/apicheck</a>
</li>
<li><a href="https://github.com/BBVA/apicheck/projects/1">https://github.com/BBVA/apicheck/projects/1</a>
</li>
<li><a href="https://apicheck.readthedocs.io/">https://apicheck.readthedocs.io/</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Problema a resolver:</h2>
<div class="outline-text-2" id="text-2">
<p>
Un servicio Web es susceptible de exponer más información de la debida. Tal
situación debe detectarse lo antes posible para poder remediarla, idealmente
antes de que la response con información indebida llegue a su destino.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Solución del proyecto:</h2>
<div class="outline-text-2" id="text-3">
<p>
Crear un toolset que permita analizar las APIs expuestas, determinando si se
ajustan a su especificación.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Casos de uso:</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>Un equipo que desarrolla un servicio Web se vería beneficiado de recibir
</li>
</ul>
<p>
informes de vulnerabilidades en su API de manera integrada con su ciclo de CI.
</p>

<ul class="org-ul">
<li>Un servicio Web configurado en modo debug queda expuesto, permitiendo el
</li>
</ul>
<p>
acceso indebido a terceros. Se precisa un sistema que alerte y/o corrija tal
situación.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Características principales:</h2>
<div class="outline-text-2" id="text-5">
<p>
Puede integrarse en ciclos de CI/CD para analizar múltiples aspectos de la
integridad de un API.
</p>

<p>
Puede integrarse en el ciclo request/response para bloquear peticiones indebidas
al vuelo.
</p>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Arquitectura&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-6">

<figure>
<p><img src="./API_Test_Diagram.png" class="img-responsive" alt="API_Test_Diagram.png">
</p>
</figure>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Caso de uso&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-7">
<p>
Es habitual la siguiente configuración:
</p>

<p>
Múltiples servicios Web tras un API gateway, que los expone al mundo exterior.
</p>

<p>
Uno de los servicios Web está mal configurado, en modo <i>debug</i>, exponiendo un
endpoint <code>/debug</code> que da acceso a montones de información jugosona.
</p>

<p>
Un usuario malicioso puede abusar este <i>endpoint</i> para conseguir acceso a un
montón de datos sensibles.
</p>
</div>
</div>


<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Detección del endpoint <code>/debug</code> inseguro&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-8">
<p>
Una herramienta de APICheck detecta el <i>endpoint</i> <code>/debug</code> y notifica el
problema.
</p>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> a) Especificación OpenAPI como Fuente de Verdad&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-9">
<p>
Una herramienta de APICheck puede parsear la especificación OpenAPI del
servicio Web y compararla con la instancia activa.  La herramienta informará
de las discrepancias encontradas.
</p>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> b) No se dispone de especificación; grabación de <i>baseline</i> contra la que realizar comparaciones&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li>@ T<sub>1</sub>, el <i>proxy</i> APICheck se usa para salvar una sesión contra el servicio
Web.
<ul class="org-ul">
<li>El API accesible se deduce y almacena para que sirva como <i>baseline</i>.
</li>
</ul>
</li>
<li>@ T<sub>2</sub>, el proxy APICheck se usa para guardar otra sesión contra el mismo
servicio Web.
<ul class="org-ul">
<li>Las herramienta informa de las discrepancias que hubiera.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Uso offline&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>Adecuado para integración en <i>workflows</i> de CI/CD.
</li>
<li>Dada una <i>request</i> válida para el servicio Web, un número de herramientas
pueden comprobar diferentes tipos de vulnerabilidades, tales como <code>SQL
    Injection</code> con <a href="http://sqlmap.org/">sqlmap</a>, <code>XSS</code>, etc.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Uso online&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>Se puede monitorizar la <i>response</i> antes de que alcance su destino, y
bloquearla si se detectan datos inapropiados.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> Comprobación de Consistency de un API&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-13">
<p>
Una herramienta de APICheck puede generar <i>requests</i> a partir de la
especificación OpenAPI de un API, buscando sistemáticamente los <i>corner cases</i>
y siendo tan exhaustivo como se le pida («mala baba» parametrizada).
</p>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Reproducción del <i>baseline</i> en producción&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-14">
<p>
El comportamiento <i>baseline</i> de un servicio Web puede ser obtenido durante la
fase de testeo, y las <i>requests</i> realizadas en aquel momento pueden ser
reenviadas al servicio Web del entorno productivo en un tiempo posterior
Así, se puede comprobar que las <i>responses</i> que devuelve el servicio Web son
consistentes con lo esperado.
</p>
</div>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Tokenización de información en la <i>response</i> al vuelo&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
</div>

<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Analítica online&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-16">
<p>
Una herramienta APICheck que detecta cabeceras anómalas en la request al
vuelo.
</p>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> Reenvío a herramientas third-party&#xa0;&#xa0;&#xa0;<span class="tag"><span class="badge slide">slide</span></span></h2>
<div class="outline-text-2" id="text-17">
<p>
Una herramienta APICheck que reenvía <i>requests///responses</i> a =burp=/=zapp=/
sin tener que duplicar las susodichas <i>requests//responses</i>.
</p>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> APICheck es <i>data-centric</i></h2>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> A explorar</h2>
<div class="outline-text-2" id="text-19">
<p>
<i>responses</i> múltiples
</p>

<p>
Enviar de la misma <i>request</i> a un <i>endpoint</i> y comprobar que la respuesta se
mantiene a lo largo del tiempo, por ejemplo, <code>/config</code>, de manera que los
cambios en la configuración del servicio no pasen desapercibidos.
</p>
</div>
</div>
</div><div class="col-md-3"><nav id="table-of-contents">
<div id="text-table-of-contents" class="bs-docs-sidebar">
<ul class="nav">
<li><a href="#sec-1">1. Links:</a></li>
<li><a href="#sec-2">2. Problema a resolver:</a></li>
<li><a href="#sec-3">3. Solución del proyecto:</a></li>
<li><a href="#sec-4">4. Casos de uso:</a></li>
<li><a href="#sec-5">5. Características principales:</a></li>
<li><a href="#sec-6">6. Arquitectura</a></li>
<li><a href="#sec-7">7. Caso de uso</a></li>
<li><a href="#sec-8">8. Detección del endpoint <code>/debug</code> inseguro</a></li>
<li><a href="#sec-9">9. a) Especificación OpenAPI como Fuente de Verdad</a></li>
<li><a href="#sec-10">10. b) No se dispone de especificación; grabación de <i>baseline</i> contra la que realizar comparaciones</a></li>
<li><a href="#sec-11">11. Uso offline</a></li>
<li><a href="#sec-12">12. Uso online</a></li>
<li><a href="#sec-13">13. Comprobación de Consistency de un API</a></li>
<li><a href="#sec-14">14. Reproducción del <i>baseline</i> en producción</a></li>
<li><a href="#sec-15">15. Tokenización de información en la <i>response</i> al vuelo</a></li>
<li><a href="#sec-16">16. Analítica online</a></li>
<li><a href="#sec-17">17. Reenvío a herramientas third-party</a></li>
<li><a href="#sec-18">18. APICheck es <i>data-centric</i></a></li>
<li><a href="#sec-19">19. A explorar</a></li>
</ul>
</div>
</nav>
</div></div></div>
<footer id="postamble" class="">
<div><p class="date">Created: 2019-12-02 Mon 06:16</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="http://orgmode.org">Org-mode</a> 9.2.6)</p>
</div>
</footer>
</body>
</html>
